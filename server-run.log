Warning: Cannot polyfill `DOMMatrix`, rendering may be broken: "Error: Cannot find module 'canvas'
Require stack:
- /Users/ryotanamiki/Desktop/insight-box/node_modules/pdfjs-dist/legacy/build/pdf.js".
Warning: Cannot polyfill `Path2D`, rendering may be broken: "Error: Cannot find module 'canvas'
Require stack:
- /Users/ryotanamiki/Desktop/insight-box/node_modules/pdfjs-dist/legacy/build/pdf.js".
objc[17030]: Class GNotificationCenterDelegate is implemented in both /Users/ryotanamiki/Desktop/insight-box/node_modules/@img/sharp-libvips-darwin-arm64/lib/libvips-cpp.8.17.2.dylib (0x12ed31af8) and /Users/ryotanamiki/Desktop/insight-box/packages/server/node_modules/canvas/build/Release/libgio-2.0.0.dylib (0x12d5dc4b8). This may cause spurious casting failures and mysterious crashes. One of the duplicates must be removed or renamed.
イベントデータを読み込みました: 2件
カードデータを読み込みました: 3件
既存のカードデータが存在するため、初期データの作成をスキップします。
Insight-Box server running on http://localhost:5178
POST /v1/documents リクエスト受信
req.body: {
  "payload": "{\"source\":{\"type\":\"file\",\"filename\":\"sample.png\",\"size\":123456,\"mime_type\":\"image/png\"},\"tasks\":[\"ocr\"],\"meta\":{\"expo\":\"Test Expo\",\"booth\":\"Test Booth\",\"captured_at\":\"2025-09-29T00:00:00Z\",\"device\":\"cli\"},\"options\":{\"enableOCR\":false}}"
}
req.file: {
  fieldname: 'file',
  originalname: 'ocr-sample.png',
  encoding: '7bit',
  mimetype: 'image/png',
  destination: '/Users/ryotanamiki/Desktop/insight-box/packages/server/uploads',
  filename: '1759196176364-czsawvevkgq-ocr-sample.png',
  path: '/Users/ryotanamiki/Desktop/insight-box/packages/server/uploads/1759196176364-czsawvevkgq-ocr-sample.png',
  size: 2095
}
生成されたID: {
  documentId: 'doc_1759196176366_sdg155qhj',
  jobId: 'job_1759196176366_aj2f9n7m8'
}
処理するデータ: {
  source: {
    type: 'file',
    filename: '1759196176364-czsawvevkgq-ocr-sample.png',
    size: 2095,
    mime_type: 'image/png'
  },
  tasks: [ 'ocr' ],
  meta: {
    expo: 'Test Expo',
    booth: 'Test Booth',
    captured_at: '2025-09-29T00:00:00Z',
    device: 'cli'
  },
  options: { enableOCR: false }
}
processDocumentAsync呼び出し開始
processDocumentAsync開始: {
  documentId: 'doc_1759196176366_sdg155qhj',
  jobId: 'job_1759196176366_aj2f9n7m8',
  source: {
    type: 'file',
    filename: '1759196176364-czsawvevkgq-ocr-sample.png',
    size: 2095,
    mime_type: 'image/png'
  },
  tasks: [ 'ocr' ],
  options: { enableOCR: false }
}
ジョブステータス更新: processing
処理するタスク: [ 'ocr' ]
タスク処理開始: ocr
OCRタスク開始, source.type: file
OCR処理実行
OCRワーカー開始: 1759196176364-czsawvevkgq-ocr-sample.png
source: {
  "type": "file",
  "filename": "1759196176364-czsawvevkgq-ocr-sample.png",
  "size": 2095,
  "mime_type": "image/png"
}
ファイルパス: /Users/ryotanamiki/Desktop/insight-box/packages/server/uploads/1759196176364-czsawvevkgq-ocr-sample.png
テキスト抽出開始
OCR処理開始: /Users/ryotanamiki/Desktop/insight-box/packages/server/uploads/1759196176364-czsawvevkgq-ocr-sample.png
processDocumentAsync呼び出し完了
Error in pixReadStream: Unknown format: no pix returned
node:internal/event_target:1101
  process.nextTick(() => { throw err; });
                           ^

Error: Error: Error attempting to read image.
    at Worker.<anonymous> (/Users/ryotanamiki/Desktop/insight-box/node_modules/tesseract.js/src/createWorker.js:217:15)
    at Worker.emit (node:events:519:28)
    at MessagePort.<anonymous> (node:internal/worker:269:53)
    at [nodejs.internal.kHybridDispatch] (node:internal/event_target:827:20)
    at MessagePort.<anonymous> (node:internal/per_context/messageport:23:28)

Node.js v22.19.0
